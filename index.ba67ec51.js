!function(){class e{constructor(e){this.id=e,this.neighbors=[],this.degree=0,this.x=0,this.y=0,this.nextX=this.x,this.nextY=this.y}secondaryConstructor(e){this.neighbors.push(e),this.degree=1,e.neighbors.push(this),e.degree+=1,this.x=Math.random()-.5,this.y=Math.random()-.5,this.nextX=this.x,this.nextY=this.y}}class t{constructor(e,t){if(e.id>=t.id)throw"invalid edge "+e.id+" "+t.id;this.node1=e,this.node2=t}}class n{constructor(){this.nodes=[],this.edges=[],this.encoding=[]}nextId(){return Math.max.apply(Math,this.nodes.map((e=>e.id)))+1}addVertex(){var n,o=Math.floor(Math.random()*this.nodes.length);0==this.nodes.length?n=new e(0):((n=new e(this.nextId())).secondaryConstructor(this.nodes[o]),this.encoding.push(o),console.log("pushed "+o)),this.nodes.push(n),1!=this.nodes.length&&this.edges.push(new t(this.nodes[o],this.nodes[n.id]))}addVertexId(n){var o;(o=new e(this.nextId())).secondaryConstructor(this.nodes[n]),this.nodes.push(o),1!=this.nodes.length&&this.edges.push(new t(this.nodes[n],this.nodes[o.id]))}removeVertex(){let e=this.nextId()-1;this.encoding.pop();for(var t=0;t<this.nodes[e].neighbors.length;t++){var n=this.nodes[e].neighbors[t];n.degree-=1;let o=n.neighbors.indexOf(this.nodes[e]);n.neighbors.splice(o,1)}for(t=0;t<this.edges.length;t++){var o=this.edges[t];o.node1.id!=e&&o.node2.id!=e||(this.edges.splice(t,1),console.log("removed edge"))}this.nodes.splice(e,1)}}function o(e){for(var t=function(e){var t=new n;t.addVertex();for(var o=0;o<e.length;o++)t.addVertexId(e[o]);if(t.nodes.length-1!=t.edges.length)throw"incorrect construction from copy";return t}(e.encoding),o="";t.nodes.length>2;){let e=r(t);console.log("smallest leaf id= "+e.id);let n=s(t,e);console.log("smallestNeighbor id= "+n.id),console.log(""),o=o+" "+n.id,d(t,e)}return console.log(o),o}function r(e){console.log("trying to find smallest leaf with "+e.nodes.length+" nodes");for(var t=0;t<e.nodes.length;t++){let n=e.nodes[t];if(1==n.degree)return n}throw"couldn't find a leaf in smallestLeaf subroutine"}function s(e,t){for(var n=Math.min.apply(Math,t.neighbors.map((e=>e.id))),o=0;o<t.neighbors.length;o++)if(t.neighbors[o].id==n)return t.neighbors[o];throw"coudln't find a smallest neighbor in smallestNeighbor subroutine"}function d(e,t){let n=t.id;console.log("remove vertex id "+t.id);for(var o=0;o<t.neighbors.length;o++){let e=t.neighbors[o];e.degree=e.degree-1;let n=e.neighbors.indexOf(t);e.neighbors.splice(n,1)}for(o=0;o<e.edges.length;o++){var r=e.edges[o];r.node1.id!=n&&r.node2.id!=n||(e.edges.splice(o,1),console.log("removed edge"))}let s=-1;for(o=0;o<e.nodes.length;o++)e.nodes[o].id==t.id&&(s=o);if(-1==s)throw"coudln't find edge-to-remove in array with id = "+t.id;e.nodes.splice(s,1)}var i=document.getElementById("myCanvas"),l=i.getContext("2d"),a=(i.getBoundingClientRect(),new n);let h=document.getElementById("code");document.getElementById("addVertex").onclick=function(){a.addVertex(),u()},document.getElementById("removeVertex").onclick=function(){a.removeVertex(),u()};var c=document.getElementById("generateMany");c.oninput=function(){a.nodes=[],a.edges=[],a.encoding=[];let e=c.value;for(var t=0;t<e;t++)a.addVertex();u()};for(var g=0;g<10;g++)a.addVertex();var f,u=()=>{h.innerHTML="<strong>Pruffer Code: </strong>"+o(a)},v=()=>{var e;l.save(),l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,i.width,i.height),l.restore(),e=l,a.nodes.forEach((function(t){e.beginPath(),e.fillStyle="black",e.arc(t.x,t.y,5,0,2*Math.PI),e.fill(),e.closePath(),e.font="14px Arial",e.fillText(t.id,t.x+5,t.y-5),e.fillStyle="red",e.font="20px Arial",e.fillText(t.degree,t.x-20,t.y+20)})),function(e,t){e.edges.forEach((function(e){t.beginPath(),t.strokeStyle="black",t.moveTo(e.node1.x,e.node1.y),t.lineTo(e.node2.x,e.node2.y),t.stroke()}))}(a,l),a.edges.length!=a.nodes.length-1&&console.log("invalid graph construction "+a.edges.length)},m=i.width/2,x=i.height/2;m=i.width/2,x=i.height/2;i.addEventListener("mousedown",(function(e){document.body.style.mozUserSelect=document.body.style.webkitUserSelect=document.body.style.userSelect="none",m=e.offsetX||e.pageX-i.offsetLeft,x=e.offsetY||e.pageY-i.offsetTop,f=l.transformedPoint(m,x),!1}),!1),i.addEventListener("mousemove",(function(e){if(m=e.offsetX||e.pageX-i.offsetLeft,x=e.offsetY||e.pageY-i.offsetTop,!0,f){var t=l.transformedPoint(m,x);l.translate(t.x-f.x,t.y-f.y),v()}}),!1),i.addEventListener("mouseup",(function(e){f=null}),!1),i.addEventListener("dblclick",(()=>{l.setTransform(1,0,0,1,0,0);var e=i.width/2,t=i.height/2;l.translate(e,t)}));var y=function(e){var t=e.wheelDelta?e.wheelDelta/40:e.detail?-e.detail:0;return t&&function(e){var t=l.transformedPoint(m,x);l.translate(t.x,t.y);var n=Math.pow(1.1,e);l.scale(n,n),l.translate(-t.x,-t.y),v()}(t),e.preventDefault()&&!1};i.addEventListener("DOMMouseScroll",y,!1),i.addEventListener("mousewheel",y,!1);var p=function(){(()=>{a.edges.forEach((function(e){if(null==e.node1||null==e.node2)return void console.log("undefined edge");if(e.node1.x==e.node2.x&&e.node1.y==e.node2.y)return void console.log("invalid edge encountered");let t=e.node2.x-e.node1.x,n=e.node2.y-e.node1.y,o=Math.sqrt(t*t+n*n);0==o&&console.log("zero distance encountered");let r=t/o,s=n/o,d=-1*r,i=-1*s;var l=.2;e.node1.nextX+=r*(l*Math.log(o/40)+4*o)*1/60,e.node1.nextY+=s*(l*Math.log(o/40)+4*o)*1/60,e.node2.nextX+=d*(l*Math.log(o/40)+4*o)*1/60,e.node2.nextY+=i*(l*Math.log(o/40)+4*o)*1/60}));for(var e=0;e<a.nodes.length;e++)for(var t=0;t<a.nodes.length;t++){if(e==t)continue;let n=a.nodes[e],o=a.nodes[t];if(null==n||null==o)return void console.log("undefined edge");let r=n.x-o.x,s=n.y-o.y,d=Math.sqrt(r*r+s*s),i=r/d,l=s/d,h=1e3/d;n.nextX+=i*h*1/60,n.nextY+=l*h*1/60}for(e=0;e<a.nodes.length;e++)a.nodes[e].x=a.nodes[e].nextX,a.nodes[e].y=a.nodes[e].nextY})(),v(),requestAnimationFrame(p)};!function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=t.createSVGMatrix();e.getTransform=function(){return n};var o=[],r=e.save;e.save=function(){return o.push(n.translate(0,0)),r.call(e)};var s=e.restore;e.restore=function(){return n=o.pop(),s.call(e)};var d=e.scale;e.scale=function(t,o){return n=n.scaleNonUniform(t,o),d.call(e,t,o)};var i=e.rotate;e.rotate=function(t){return n=n.rotate(180*t/Math.PI),i.call(e,t)};var l=e.translate;e.translate=function(t,o){return n=n.translate(t,o),l.call(e,t,o)};var a=e.transform;e.transform=function(o,r,s,d,i,l){var h=t.createSVGMatrix();return h.a=o,h.b=r,h.c=s,h.d=d,h.e=i,h.f=l,n=n.multiply(h),a.call(e,o,r,s,d,i,l)};var h=e.setTransform;e.setTransform=function(t,o,r,s,d,i){return n.a=t,n.b=o,n.c=r,n.d=s,n.e=d,n.f=i,h.call(e,t,o,r,s,d,i)};var c=t.createSVGPoint();e.transformedPoint=function(e,t){return c.x=e,c.y=t,c.matrixTransform(n.inverse())}}(l);var b=i.width/2,w=i.height/2;l.translate(b,w),u(),p()}();
//# sourceMappingURL=index.ba67ec51.js.map
